<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jorge muñoz docs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            border-bottom: 1px solid #333;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 60px;
            height: 40px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
            font-size: 1.2rem;
        }

        .logo-text {
            font-size: 1.1rem;
            font-weight: 400;
        }

        .mit-logo {
            font-size: 2rem;
            font-weight: bold;
            letter-spacing: 3px;
        }

        /* Main Content */
        .main-content {
            padding: 3rem 0;
        }

        .tagline {
            font-style: italic;
            font-size: 1.1rem;
            margin-bottom: 3rem;
            color: #ccc;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .content-block {
            font-size: 0.95rem;
            line-height: 1.7;
            color: #e0e0e0;
        }

        /* Collapsible Sections */
        .collapsible-section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #333;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .section-header:hover {
            opacity: 0.8;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 500;
            user-select: none;
        }

        .collapse-indicator {
            margin-left: auto;
            font-size: 1rem;
            transition: transform 0.3s ease;
            user-select: none;
        }

        .collapsible-section.collapsed .collapse-indicator {
            transform: rotate(-90deg);
        }

        .section-content {
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.3s ease;
        }

        .collapsible-section.collapsed .section-content {
            max-height: 0;
            opacity: 0;
        }

        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-input {
            background: transparent;
            border: none;
            border-bottom: 1px solid #333;
            color: #fff;
            padding: 0.5rem 2rem 0.5rem 0;
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.3s ease;
            min-width: 200px;
        }

        .search-input::placeholder {
            color: #666;
        }

        .search-input:focus {
            border-bottom-color: #fff;
        }

        .search-icon {
            position: absolute;
            right: 0;
            width: 20px;
            height: 20px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 1 0-.7.7l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>') no-repeat center;
            background-size: contain;
            opacity: 0.7;
            pointer-events: none;
        }

        .project-card.hidden,
        .outreach-card.hidden {
            display: none;
        }

        .project-card,
        .outreach-card {
            transition: transform 0.3s ease;
        }

        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 2rem;
            color: #666;
            font-style: italic;
        }

        .projects-grid,
        .outreach-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .project-card,
        .outreach-card {
            position: relative;
            aspect-ratio: 1;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease;
            width: 100%;
            height: 0;
            padding-bottom: 100%; /* Forces 1:1 aspect ratio */
        }

        .project-card:hover,
        .outreach-card:hover {
            transform: translateY(-5px);
        }

        .project-image,
        .outreach-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .project-overlay,
        .outreach-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            padding: 1rem;
            transform: translateY(100%);
            transition: transform 0.3s ease;
        }

        .project-card:hover .project-overlay,
        .outreach-card:hover .outreach-overlay {
            transform: translateY(0);
        }

        .project-title,
        .outreach-title {
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .project-year,
        .outreach-year {
            font-size: 0.8rem;
            color: #ccc;
        }

        /* Project Images */
        .dust-bloom { background: linear-gradient(135deg, #ff6b35, #f7931e); }
        .data-slots { background: linear-gradient(135deg, #4a90e2, #7b68ee); }
        .beijing-inside { background: linear-gradient(135deg, #ff1744, #9c27b0); }
        .fiberspace { background: linear-gradient(135deg, #2196f3, #21cbf3); }
        .feeling-nature { background: linear-gradient(135deg, #ffeb3b, #4caf50); }
        .green-bias { background: linear-gradient(135deg, #4caf50, #8bc34a); }
        .boxing-reactions { background: linear-gradient(135deg, #00bcd4, #009688); }
        .being-physical { background: linear-gradient(135deg, #607d8b, #455a64); }

        /* Outreach Images */
        .tech-talk { background: linear-gradient(135deg, #e91e63, #f06292); }
        .workshop-series { background: linear-gradient(135deg, #ff9800, #ffb74d); }
        .sustainability-forum { background: linear-gradient(135deg, #4caf50, #81c784); }
        .design-thinking { background: linear-gradient(135deg, #9c27b0, #ba68c8); }
        .innovation-lab { background: linear-gradient(135deg, #f44336, #ef5350); }
        .future-cities { background: linear-gradient(135deg, #2196f3, #64b5f6); }

        /* CV Section */
        .cv-section {
            padding: 4rem 0;
            background: #0a0a0a;
            margin-top: 3rem;
        }

        .cv-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .cv-column {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .cv-column-title {
            font-size: 1rem;
            font-weight: 500;
            color: #fff;
            margin: 0 0 0.75rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
        }

        .cv-content {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .cv-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.5rem 0;
            font-size: 0.8rem;
            line-height: 1.3;
        }

        .cv-arrow {
            color: #666;
            font-size: 0.8rem;
            margin-top: 0.1rem;
            flex-shrink: 0;
        }

        .cv-details {
            flex: 1;
        }

        .cv-title {
            font-weight: 500;
            color: #fff;
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
        }

        .cv-role {
            color: #ccc;
            margin-bottom: 0.25rem;
            font-size: 0.8rem;
        }

        .cv-author {
            color: #ccc;
            margin-bottom: 0.25rem;
            font-style: italic;
            font-size: 0.8rem;
        }

        .cv-date {
            color: #888;
            font-size: 0.75rem;
            margin-bottom: 0.25rem;
        }

        .cv-link {
            margin-top: 0.25rem;
        }

        .cv-link a {
            color: #4a90e2;
            text-decoration: none;
            font-size: 0.75rem;
            transition: color 0.3s ease;
        }

        .cv-link a:hover {
            color: #7bb3f0;
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 0 1rem;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .content-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .projects-grid,
            .outreach-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
            }

            .tagline {
                font-size: 1rem;
            }

            .content-block {
                font-size: 0.9rem;
            }

            .section-header {
                flex-wrap: wrap;
            }

            .search-container {
                width: 100%;
                margin-top: 1rem;
            }

            .search-input {
                width: 100%;
            }

            .cv-container {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 0 1rem;
            }

            .cv-section {
                padding: 2rem 0;
            }
        }

        @media (max-width: 480px) {
            .projects-grid,
            .outreach-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .logo-icon {
                width: 50px;
                height: 35px;
                font-size: 1rem;
            }
            
            .mit-logo {
                font-size: 1.5rem;
            }
        }

        /* Animations */
        .project-card,
        .outreach-card {
            animation: fadeInUp 0.6s ease forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .project-card:nth-child(1),
        .outreach-card:nth-child(1) { animation-delay: 0.1s; }
        .project-card:nth-child(2),
        .outreach-card:nth-child(2) { animation-delay: 0.2s; }
        .project-card:nth-child(3),
        .outreach-card:nth-child(3) { animation-delay: 0.3s; }
        .project-card:nth-child(4),
        .outreach-card:nth-child(4) { animation-delay: 0.4s; }
        .project-card:nth-child(5),
        .outreach-card:nth-child(5) { animation-delay: 0.5s; }
        .project-card:nth-child(6),
        .outreach-card:nth-child(6) { animation-delay: 0.6s; }
        .project-card:nth-child(7),
        .outreach-card:nth-child(7) { animation-delay: 0.7s; }
        .project-card:nth-child(8),
        .outreach-card:nth-child(8) { animation-delay: 0.8s; }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <div class="logo-icon"></div>
                <div class="logo-text">
                    jorge<br>
                    muñoz zanón
                </div>
            </div>
            <div class="mit-logo">___</div>
        </header>

        <main class="main-content">
            <div class="tagline">
                Lorem ipsum<br>
                lorem ipsum &amp; lorem ipsum
            </div>

            <div class="content-grid">
                <div class="content-block">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum, accusantium recusandae et sunt atque dicta animi corporis nemo quaerat veritatis nostrum modi voluptatum deleniti ea. Similique ipsum voluptate aut quisquam?
                </div>

                <div class="content-block">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Exercitationem eveniet, obcaecati modi impedit quas pariatur sed, quam facilis debitis blanditiis in? Recusandae aliquid fuga aperiam sit obcaecati quae magni sunt.
                </div>

                <div class="content-block">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Commodi, voluptas, qui necessitatibus cupiditate sit ratione odio incidunt ea consequuntur libero doloremque laborum aperiam delectus dolore, perferendis laboriosam enim beatae minus?
                </div>
            </div>

            <!-- Projects Section -->
            <section class="collapsible-section" id="projectsSection">
                <div class="section-header" onclick="toggleSection('projectsSection')">
                    <h2 class="section-title">Projects</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Search projects..." id="projectSearch">
                        <div class="search-icon"></div>
                    </div>
                    <div class="collapse-indicator">▼</div>
                </div>

                <div class="section-content">
                    <div class="projects-grid" id="projectsGrid">
                        <div class="project-card" data-title="dust bloom">
                            <div class="project-image dust-bloom"></div>
                            <div class="project-overlay">
                                <div class="project-title">Ars Post Faber</div>
                                <div class="project-year">2025</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="data slots">
                            <div class="project-image data-slots"></div>
                            <div class="project-overlay">
                                <div class="project-title">LLUM BCN 2025</div>
                                <div class="project-year">2025</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="beijing inside out">
                            <div class="project-image beijing-inside"></div>
                            <div class="project-overlay">
                                <div class="project-title">Non-Planar Robotic 3D Printing</div>
                                <div class="project-year">2024</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="fiberspace">
                            <div class="project-image fiberspace"></div>
                            <div class="project-overlay">
                                <div class="project-title">AI.RTISANSHIP</div>
                                <div class="project-year">2024</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="feeling nature">
                            <div class="project-image feeling-nature"></div>
                            <div class="project-overlay">
                                <div class="project-title">AI 3D MODELS GH</div>
                                <div class="project-year">2024</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="green bias">
                            <div class="project-image green-bias"></div>
                            <div class="project-overlay">
                                <div class="project-title">Reencuentro</div>
                                <div class="project-year">2023</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="boxing reactions">
                            <div class="project-image boxing-reactions"></div>
                            <div class="project-overlay">
                                <div class="project-title">Slow Furniture</div>
                                <div class="project-year">2023</div>
                            </div>
                        </div>

                        <div class="project-card" data-title="being physical">
                            <div class="project-image being-physical"></div>
                            <div class="project-overlay">
                                <div class="project-title">Happy Meal for the Future</div>
                                <div class="project-year">2023</div>
                            </div>
                        </div>

                        <div class="no-results" id="projectsNoResults" style="display: none;">
                            No projects found matching your search.
                        </div>
                    </div>
                </div>
            </section>

            <!-- Outreach Section -->
            <section class="collapsible-section" id="outreachSection">
                <div class="section-header" onclick="toggleSection('outreachSection')">
                    <h2 class="section-title">Outreach</h2>
                    <div class="search-container">
                        <input type="text" class="search-input" placeholder="Search outreach..." id="outreachSearch">
                        <div class="search-icon"></div>
                    </div>
                    <div class="collapse-indicator">▼</div>
                </div>

                <div class="section-content">
                    <div class="outreach-grid" id="outreachGrid">
                        <div class="outreach-card" data-title="neo artesania workshop">
                            <div class="outreach-image tech-talk"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">Neo Artesanía Workshop</div>
                                <div class="outreach-year">2025</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="distributed design exhibition">
                            <div class="outreach-image workshop-series"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">Distributed Design Exhibition</div>
                                <div class="outreach-year">2025</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="llum bcn festival">
                            <div class="outreach-image sustainability-forum"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">LLUM BCN Festival</div>
                                <div class="outreach-year">2025</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="collective intelligence seminar">
                            <div class="outreach-image design-thinking"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">Collective Intelligence Seminar</div>
                                <div class="outreach-year">2025</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="craftinnova workshop">
                            <div class="outreach-image innovation-lab"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">Craftinnova Workshop</div>
                                <div class="outreach-year">2024</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="dafne symposium talk">
                            <div class="outreach-image future-cities"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">DAFNE+ Symposium Talk</div>
                                <div class="outreach-year">2024</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="infosos interview">
                            <div class="outreach-image tech-talk"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">InfoSOS Interview</div>
                                <div class="outreach-year">2024</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="upv unesco feature">
                            <div class="outreach-image workshop-series"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">UPV UNESCO Feature</div>
                                <div class="outreach-year">2024</div>
                            </div>
                        </div>

                        <div class="outreach-card" data-title="artesania exhibition">
                            <div class="outreach-image sustainability-forum"></div>
                            <div class="outreach-overlay">
                                <div class="outreach-title">Artesanía Exhibition</div>
                                <div class="outreach-year">2022</div>
                            </div>
                        </div>

                        <div class="no-results" id="outreachNoResults" style="display: none;">
                            No outreach activities found matching your search.
                        </div>
                    </div>
                </div>
            </section>

            <!-- CV Section -->
            <section class="cv-section">
                <div class="cv-container">
                    <div class="cv-column">
                        <h3 class="cv-column-title">Employment</h3>
                        <div class="cv-content" id="employmentContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>

                        <h3 class="cv-column-title">Education</h3>
                        <div class="cv-content" id="educationContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>
                    </div>

                    <div class="cv-column">
                        <h3 class="cv-column-title">Publications & Writings</h3>
                        <div class="cv-content" id="publicationsContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>

                        <h3 class="cv-column-title">Recognitions</h3>
                        <div class="cv-content" id="recognitionsContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>
                    </div>

                    <div class="cv-column">
                        <h3 class="cv-column-title">Languages</h3>
                        <div class="cv-content" id="languagesContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>

                        <h3 class="cv-column-title">Certifications</h3>
                        <div class="cv-content" id="certificationsContent">
                            <!-- Content will be loaded dynamically from cv.tex -->
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // CV Data Functions
        function loadCVData() {
            try {
                if (window.fs && window.fs.readFile) {
                    return window.fs.readFile('cv.tex', { encoding: 'utf8' }).then(function(cvContent) {
                        return parseCVContent(cvContent);
                    }).catch(function(error) {
                        console.log('Could not load cv.tex file, using fallback data');
                        return getFallbackCVData();
                    });
                } else {
                    console.log('File system not available, using fallback data');
                    return Promise.resolve(getFallbackCVData());
                }
            } catch (error) {
                console.log('Error loading CV data, using fallback');
                return Promise.resolve(getFallbackCVData());
            }
        }

        function parseCVContent(content) {
            var cvData = {
                employment: [],
                education: [],
                publications: [],
                recognitions: [],
                languages: [],
                certifications: []
            };

            // Parse Employment section
            var employmentMatch = content.match(/\\section\*\{EMPLOYMENT\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (employmentMatch) {
                var employmentItems = employmentMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (employmentItems) {
                    for (var i = 0; i < employmentItems.length; i++) {
                        var item = employmentItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var roleMatch = item.match(/\\textbf\{[^}]+\},\s*([^\n\\]+)/);
                        var dateMatch = item.match(/\\textit\{([^}]+)\}/);
                        
                        if (titleMatch && roleMatch) {
                            cvData.employment.push({
                                title: titleMatch[1],
                                role: roleMatch[1],
                                date: dateMatch ? dateMatch[1] : ''
                            });
                        }
                    }
                }
            }

            // Parse Education section
            var educationMatch = content.match(/\\section\*\{EDUCATION\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (educationMatch) {
                var educationItems = educationMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (educationItems) {
                    for (var i = 0; i < educationItems.length; i++) {
                        var item = educationItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var roleMatch = item.match(/\\\\[\s]*([^\n\\]+)/);
                        var dateMatch = item.match(/\\textit\{([^}]+)\}/);
                        
                        if (titleMatch) {
                            cvData.education.push({
                                title: titleMatch[1],
                                role: roleMatch ? roleMatch[1].trim() : '',
                                date: dateMatch ? dateMatch[1] : ''
                            });
                        }
                    }
                }
            }

            // Parse Publications & Writings section
            var publicationsMatch = content.match(/\\section\*\{PUBLICATIONS & WRITINGS\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (publicationsMatch) {
                var publicationItems = publicationsMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (publicationItems) {
                    for (var i = 0; i < publicationItems.length; i++) {
                        var item = publicationItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var authorMatch = item.match(/\\\\[\s]*([^\\]+?)\\\\[\s]*\\href/);
                        var linkMatch = item.match(/\\href\{([^}]*)\}\{[^}]*\\faLink\\[^}]*([^}]+)\}/);
                        var dateMatch = item.match(/·\s*([A-Z][a-z]{2}\s+\d{4})/);
                        
                        if (titleMatch) {
                            cvData.publications.push({
                                title: titleMatch[1],
                                author: authorMatch ? authorMatch[1].trim() : '',
                                link: linkMatch ? linkMatch[1] : '',
                                linkText: linkMatch ? linkMatch[2].trim() : '',
                                date: dateMatch ? dateMatch[1] : ''
                            });
                        }
                    }
                }
            }

            // Parse Recognitions section
            var recognitionsMatch = content.match(/\\section\*\{RECOGNITIONS\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (recognitionsMatch) {
                var recognitionItems = recognitionsMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (recognitionItems) {
                    for (var i = 0; i < recognitionItems.length; i++) {
                        var item = recognitionItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var roleMatch = item.match(/\\textbf\{[^}]+\}\s+([^\n\\]+)/);
                        var dateMatch = item.match(/([A-Z][a-z]{2}\s+\d{4})/);
                        
                        if (titleMatch) {
                            cvData.recognitions.push({
                                title: titleMatch[1],
                                role: roleMatch ? roleMatch[1].trim() : '',
                                date: dateMatch ? dateMatch[1] : ''
                            });
                        }
                    }
                }
            }

            // Parse Languages section
            var languagesMatch = content.match(/\\section\*\{LANGUAGES\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (languagesMatch) {
                var languageItems = languagesMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (languageItems) {
                    for (var i = 0; i < languageItems.length; i++) {
                        var item = languageItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var roleMatch = item.match(/·\s*\(([^)]+)\)/);
                        
                        if (titleMatch) {
                            cvData.languages.push({
                                title: titleMatch[1],
                                role: roleMatch ? roleMatch[1] : '',
                                date: ''
                            });
                        }
                    }
                }
            }

            // Parse Certifications section
            var certificationsMatch = content.match(/\\section\*\{CERTIFICATIONS\}[\s\S]*?\\begin\{itemize\}([\s\S]*?)\\end\{itemize\}/);
            if (certificationsMatch) {
                var certificationItems = certificationsMatch[1].match(/\\item\s+\\textbf\{[^}]+\}[\s\S]*?(?=\\item|$)/g);
                if (certificationItems) {
                    for (var i = 0; i < certificationItems.length; i++) {
                        var item = certificationItems[i];
                        var titleMatch = item.match(/\\textbf\{([^}]+)\}/);
                        var roleMatch = item.match(/\\\\[\s]*([^\n·]+)/);
                        var dateMatch = item.match(/·\s*Issued\s+([A-Z][a-z]{2}\s+\d{4})/);
                        
                        if (titleMatch) {
                            cvData.certifications.push({
                                title: titleMatch[1],
                                role: roleMatch ? roleMatch[1].trim() : '',
                                date: dateMatch ? 'Issued ' + dateMatch[1] : ''
                            });
                        }
                    }
                }
            }

            return cvData;
        }

        // Fallback CV Data
        function getFallbackCVData() {
            return {
                employment: [
                    {
                        title: "Institut Bellvitge",
                        role: "STEM Teacher",
                        date: "May 2025 - Jun 2025 · 2 mos"
                    },
                    {
                        title: "Institut TIC de Barcelona",
                        role: "Computer Science Teacher",
                        date: "Jan 2025 - May 2025 · 5 mos"
                    },
                    {
                        title: "Dafne+",
                        role: "Ambassador",
                        date: "May 2024 - May 2025 · 1 yr"
                    },
                    {
                        title: "Universitat Politècnica de València (UPV)",
                        role: "Pedro Duque laboratory technician",
                        date: "Apr 2023 - Jul 2023 · 4 mos"
                    },
                    {
                        title: "YUDesign UPV",
                        role: "Member",
                        date: "May 2022 - Sep 2023 · 1 yr 5 mos"
                    },
                    {
                        title: "YUDesign UPV",
                        role: "Social Media Coordinator",
                        date: "Nov 2022 - Sep 2023 · 11 mos"
                    }
                ],
                education: [
                    {
                        title: "Universidad Internacional de La Rioja (UNIR)",
                        role: "Máster Universitario en Formación del Profesorado de Educación Secundaria Obligatoria y Bachillerato, Formación Profesional y Enseñanzas de Idiomas",
                        date: "Sep 2025 - Jul 2026 · 1 yrs"
                    },
                    {
                        title: "Institute for Advanced Architecture of Catalonia (IAAC) / FAB LAB BCN / ELISAVA",
                        role: "Master in Design for Emergent Futures",
                        date: "Oct 2023 - Sep 2025 · 2 yrs"
                    },
                    {
                        title: "Universitat Politècnica de València (UPV)",
                        role: "Bachelor's Degree in Industrial Design Engineering and Product Development",
                        date: "Sep 2019 - Sep 2023 · 4 yrs"
                    }
                ],
                publications: [
                    {
                        title: "Embodied Knowledge in Digital Spaces: Towards Human-Centered Fabrication Formats",
                        author: "Muñoz Zanón, J. (2025). Fab25 Czechia: Bridge the Gap.",
                        link: "",
                        linkText: "fab25.fabevent.org",
                        date: "Jul 2025"
                    },
                    {
                        title: "My experience as DAFNE+ Ambassador",
                        author: "Muñoz Zanón, J. (2025). Fab Lab Barcelona.",
                        link: "https://fablabbcn.org/blog/emergent-ideas/my-experience-as-dafne-ambassador",
                        linkText: "fablabbcn.org",
                        date: "May 2025"
                    },
                    {
                        title: "Slow furniture: disseny d'un moble evolutiu, durador i emocional",
                        author: "Muñoz Zanón, J. (2023). Universitat Politècnica de València.",
                        link: "https://riunet.upv.es/handle/10251/197203",
                        linkText: "riunet.upv.es",
                        date: "Sep 2023"
                    }
                ],
                recognitions: [
                    {
                        title: "Mención de Honor craftinnova",
                        role: "AI.RTISANSHIP: Preservando la Artesanía en la Era Digital",
                        date: "Craftinnova + Foacal · Dec 2024"
                    },
                    {
                        title: "Bronze Award - UNESCO International Innovation Design Awards (IIDA) & Science for SDGs",
                        role: "Innovation Contest 2023",
                        date: "UNESCO · Dec 2023"
                    },
                    {
                        title: "1st Place McDonald's Happy Meal for the Future Challenge",
                        role: "McDonald's + DFGN + TMS",
                        date: "Jun 2023"
                    },
                    {
                        title: "Second prize in the 2023 TALENT-HOP Scholarship",
                        role: "ALE-HOP",
                        date: "May 2023"
                    },
                    {
                        title: "Finalist of the 2022 Valencian Community Artisanship Awards in the Nous Talents category",
                        role: "Generalitat Valenciana - Conselleria d'Economia Sostenible, Sectors Productius, Comerç i Treball",
                        date: "Dec 2022"
                    },
                    {
                        title: "Second prize in the 2022 TALENT-HOP Scholarship",
                        role: "ALE-HOP",
                        date: "May 2022"
                    }
                ],
                languages: [
                    {
                        title: "Catalan/Valencian",
                        role: "Native",
                        date: ""
                    },
                    {
                        title: "Spanish",
                        role: "Native",
                        date: ""
                    },
                    {
                        title: "English",
                        role: "C1",
                        date: ""
                    },
                    {
                        title: "Italian",
                        role: "B1/B2 (Courses at Centro G. Leopardi not accredited)",
                        date: ""
                    }
                ],
                certifications: [
                    {
                        title: "Ad. Parametric Texture : Rhino + Gh Masterclass",
                        role: "Cademy",
                        date: "Issued Nov 2024"
                    },
                    {
                        title: "Computational Design Workshop",
                        role: "Cademy",
                        date: "Issued Sep 2024"
                    },
                    {
                        title: "Marketing Innovative Products and Services",
                        role: "University of Maryland",
                        date: "Issued Apr 2024"
                    },
                    {
                        title: "Engineering Design for a Circular Economy",
                        role: "Delft University of Technology",
                        date: "Issued Mar 2024"
                    },
                    {
                        title: "Data Science: Visualization",
                        role: "Harvard University",
                        date: "Issued Jan 2024"
                    },
                    {
                        title: "Keyshot Rendering Masterclass",
                        role: "Cademy",
                        date: "Issued Dec 2023"
                    },
                    {
                        title: "Grasshopper 3D Masterclass",
                        role: "Cademy",
                        date: "Issued Nov 2023"
                    }
                ]
            };
        }

        // Toggle section collapse/expand
        function toggleSection(sectionId) {
            var section = document.getElementById(sectionId);
            var isCollapsed = section.classList.contains('collapsed');
            
            if (isCollapsed) {
                section.classList.remove('collapsed');
                var content = section.querySelector('.section-content');
                content.style.maxHeight = content.scrollHeight + 'px';
            } else {
                section.classList.add('collapsed');
                var content = section.querySelector('.section-content');
                content.style.maxHeight = '0px';
            }
        }

        // Initialize sections with proper max-height
        function initializeSections() {
            var sections = document.querySelectorAll('.collapsible-section');
            for (var i = 0; i < sections.length; i++) {
                var section = sections[i];
                var content = section.querySelector('.section-content');
                if (!section.classList.contains('collapsed')) {
                    content.style.maxHeight = content.scrollHeight + 'px';
                }
            }
        }

        // Search functionality
        function initializeSearch() {
            var projectSearch = document.getElementById('projectSearch');
            var projectCards = document.querySelectorAll('.project-card[data-title]');
            var projectsNoResults = document.getElementById('projectsNoResults');

            if (projectSearch) {
                projectSearch.addEventListener('input', function() {
                    var searchTerm = this.value.toLowerCase().trim();
                    var visibleCount = 0;

                    for (var i = 0; i < projectCards.length; i++) {
                        var card = projectCards[i];
                        var title = card.getAttribute('data-title');
                        var isMatch = title.includes(searchTerm);
                        
                        if (isMatch) {
                            card.classList.remove('hidden');
                            visibleCount++;
                        } else {
                            card.classList.add('hidden');
                        }
                    }

                    if (visibleCount === 0 && searchTerm !== '') {
                        projectsNoResults.style.display = 'block';
                    } else {
                        projectsNoResults.style.display = 'none';
                    }
                });
            }

            var outreachSearch = document.getElementById('outreachSearch');
            var outreachCards = document.querySelectorAll('.outreach-card[data-title]');
            var outreachNoResults = document.getElementById('outreachNoResults');

            if (outreachSearch) {
                outreachSearch.addEventListener('input', function() {
                    var searchTerm = this.value.toLowerCase().trim();
                    var visibleCount = 0;

                    for (var i = 0; i < outreachCards.length; i++) {
                        var card = outreachCards[i];
                        var title = card.getAttribute('data-title');
                        var isMatch = title.includes(searchTerm);
                        
                        if (isMatch) {
                            card.classList.remove('hidden');
                            visibleCount++;
                        } else {
                            card.classList.add('hidden');
                        }
                    }

                    if (visibleCount === 0 && searchTerm !== '') {
                        outreachNoResults.style.display = 'block';
                    } else {
                        outreachNoResults.style.display = 'none';
                    }
                });
            }

            // Clear search when escape key is pressed
            var searchInputs = [projectSearch, outreachSearch];
            for (var i = 0; i < searchInputs.length; i++) {
                var input = searchInputs[i];
                if (input) {
                    input.addEventListener('keydown', function(e) {
                        if (e.key === 'Escape') {
                            this.value = '';
                            this.dispatchEvent(new Event('input'));
                            this.blur();
                        }
                    });

                    input.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                }
            }

            var searchContainers = document.querySelectorAll('.search-container');
            for (var i = 0; i < searchContainers.length; i++) {
                searchContainers[i].addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            }
        }

        function renderCVSection(sectionId, data, type) {
            var section = document.getElementById(sectionId);
            if (!section) return;

            var html = '';
            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                if (type === 'publications') {
                    var linkHtml = '';
                    if (item.link) {
                        linkHtml = '<div class="cv-link"><a href="' + item.link + '" target="_blank">' + item.linkText + '</a> · ' + item.date + '</div>';
                    } else {
                        linkHtml = '<div class="cv-date">' + item.date + '</div>';
                    }
                    
                    html += '<div class="cv-item">' +
                        '<div class="cv-arrow">→</div>' +
                        '<div class="cv-details">' +
                        '<div class="cv-title">' + item.title + '</div>' +
                        '<div class="cv-author">' + item.author + '</div>' +
                        linkHtml +
                        '</div>' +
                        '</div>';
                } else {
                    var dateHtml = item.date ? '<div class="cv-date">' + item.date + '</div>' : '';
                    
                    html += '<div class="cv-item">' +
                        '<div class="cv-arrow">→</div>' +
                        '<div class="cv-details">' +
                        '<div class="cv-title">' + item.title + '</div>' +
                        '<div class="cv-role">' + item.role + '</div>' +
                        dateHtml +
                        '</div>' +
                        '</div>';
                }
            }
            section.innerHTML = html;
        }

        function initializeCV() {
            loadCVData().then(function(cvData) {
                renderCVSection('employmentContent', cvData.employment, 'standard');
                renderCVSection('educationContent', cvData.education, 'standard');
                renderCVSection('publicationsContent', cvData.publications, 'publications');
                renderCVSection('recognitionsContent', cvData.recognitions, 'standard');
                renderCVSection('languagesContent', cvData.languages, 'standard');
                renderCVSection('certificationsContent', cvData.certifications, 'standard');
            }).catch(function(error) {
                console.log('Error initializing CV:', error);
                // Fallback to static data if Promise fails
                var cvData = getFallbackCVData();
                renderCVSection('employmentContent', cvData.employment, 'standard');
                renderCVSection('educationContent', cvData.education, 'standard');
                renderCVSection('publicationsContent', cvData.publications, 'publications');
                renderCVSection('recognitionsContent', cvData.recognitions, 'standard');
                renderCVSection('languagesContent', cvData.languages, 'standard');
                renderCVSection('certificationsContent', cvData.certifications, 'standard');
            });
        }

        // Initialize everything on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeSections();
            initializeSearch();
            initializeCV();
        });
    </script>
</body>
</html>